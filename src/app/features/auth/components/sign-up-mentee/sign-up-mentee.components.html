<div>
    <app-navbar></app-navbar>
    <div class="min-h-[calc(100vh-72px)] bg-base-200 flex items-center">
        <div class="card mx-auto w-full max-w-5xl shadow-xl">
            <div class="grid md:grid-cols-2 grid-cols-1 bg-base-100 h-[620px] rounded-xl">

                <div class="hidden md:block">
                    <img src="./kenny-eliason.jpg" alt="Login illustration"
                        class="w-full h-full object-cover rounded-l-xl" />
                </div>

                <!-- Right side (Login form) -->
                <div class="flex items-center justify-center px-10">
                    <div class="w-full">
                        <h2 class="text-2xl font-semibold text-center">Register as mentee</h2>

                        <div class="h-4 mb-9">
                            @if (errorMessage()) {
                            <div role="alert" class="alert alert-error alert-soft">
                                <span>{{errorMessage()}}</span>
                            </div>
                            }
                        </div>

                        <form [formGroup]="authForm" (ngSubmit)="onSubmit()" class="flex flex-col">

                            <div class="form-control w-full mt-2">
                                <label class="label">
                                    <span class="label-text">First Name</span>
                                </label>
                                <input type="text" placeholder="Enter your first name"
                                    class="input input-bordered w-full mt-1 placeholder-gray-400" formControlName="first_name" required />

                                <div class="h-4">
                                    @if (first_name!.invalid && (first_name!.dirty || first_name!.touched ||
                                    formSubmitted())) {
                                    @if (first_name!.hasError('required')) {
                                    <span class="text-error text-xs">First Name is required.</span>
                                    }
                                    }
                                </div>
                            </div>

                            <div class="form-control mt-2">
                                <label class="label">
                                    <span class="label-text">Last Name</span>
                                </label>
                                <input type="text" placeholder="Enter your last name"
                                    class="input input-bordered w-full mt-1 placeholder-gray-400" formControlName="last_name" required />

                                <div class="h-4">
                                    @if (last_name!.invalid && (last_name!.dirty || last_name!.touched || formSubmitted()))
                                    {
                                    @if (last_name!.hasError('required')) {
                                    <span class="text-error text-xs">Last Name is required.</span>
                                    }
                                    }
                                </div>
                            </div>
                                                    
                            @if(!uidSignInWithGoogle() && !emailSignInWithGoogle()) {                        

                                <div class="form-control w-full mt-2">
                                    <label class="label">
                                        <span class="label-text">Email</span>
                                    </label>
                                    <input type="email" placeholder="Enter your email" 
                                        class="input input-bordered w-full mt-1 placeholder-gray-400" formControlName="email" required />

                                    <div class="h-4">
                                        @if (email!.invalid && (email!.dirty || email!.touched || formSubmitted())) {
                                            @if (email!.hasError('required')) {
                                            <span class="text-error text-xs">Email is required.</span>
                                            }
                                            @if (email!.hasError('email')) {
                                            <span class="text-error text-xs">Email must be in valid format.</span>
                                            }
                                        }
                                    </div>
                                </div>

                                <div class="form-control w-full mt-2">
                                    <label class="label">
                                        <span class="label-text">Password</span>
                                    </label>
                                    <input type="password" placeholder="Enter your password"
                                        class="input input-bordered w-full mt-1 placeholder-gray-400" formControlName="password" required />

                                    <div class="h-4">
                                        @if (password!.invalid && (password!.dirty || password!.touched || formSubmitted())) {
                                            @if (password!.hasError('required')) {
                                                <span class="text-error text-xs">Password is required.</span>
                                            }
                                            @if (password!.hasError('minlength')) {
                                            <span class="text-error text-xs">Password must be at least 4 characters long.</span>
                                            }
                                        }
                                    </div>
                                </div>                            
                            }
                            
                            <div class="relative mt-4">
                                <button type="submit" class="w-full bg-emerald-500 text-white font-medium px-5 py-2 rounded-sm hover:bg-emerald-600 transition-all duration-200 cursor-pointer">Register</button>
                                
                                <!-- Loading spinner overlay -->
                                @if (isSubmissionInProgress()) {
                                    <div class="absolute inset-0 flex items-center justify-center bg-base-100/70">
                                        <span class="loading loading-spinner loading-lg"></span>
                                    </div>
                                }
                            </div>                

                            <div class="text-center mt-4 text-sm">
                                Already have an account?
                                <a [routerLink]="['/auth/sign-in']" class="text-emerald-500 hover:underline">Login</a>
                            </div>

                        </form>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>